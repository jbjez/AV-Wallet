<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="AV Wallet">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="AV Wallet">
  <link rel="icon" type="image/x-icon" href="/favicon.ico?v=3">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/logo3.png?v=3">
  <link rel="icon" type="image/png" sizes="192x192" href="/assets/logo3.png?v=3">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/logo3.png?v=3">
  <link rel="shortcut icon" href="/favicon.ico?v=3">
  <title>AV Wallet</title>
  <link rel="manifest" href="manifest.json">
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #0A1128;
      color: white;
      min-height: 100vh;
      position: relative;
    }

    .overlay {
      display: none;
    }

    .container {
      position: relative;
      z-index: 1;
      max-width: 1200px;
      margin: auto;
      padding: 60px 20px 20px 20px;
      text-align: center;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .language-menu {
      position: absolute;
      top: 20px;
      left: 20px;
      z-index: 2;
    }

    .language-select {
      background-color: rgba(255,255,255,0.1);
      color: white;
      border: 1px solid white;
      border-radius: 8px;
      padding: 6px;
      font-size: 14px;
    }

    .logo-container {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 20px;
    }

    .logo {
      max-width: 140px;
      display: block;
    }

    h1 {
      font-size: 40px;
      font-weight: 800;
      margin-bottom: 10px;
    }

    p.subtitle {
      font-size: 20px;
      color: #93AEDD;
      margin-bottom: 40px;
    }

    footer {
      text-align: center;
      margin-top: auto;
      padding: 40px 20px;
      font-size: 13px;
      color: #ccc;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      width: 100%;
    }

    footer .footer-content {
      max-width: 800px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    footer .footer-links {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 15px;
    }

    footer .footer-links a {
      color: #93AEDD;
      text-decoration: none;
      transition: color 0.3s;
    }

    footer .footer-links a:hover {
      color: #fff;
      text-decoration: underline;
    }

    footer .footer-contact {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
      font-size: 14px;
      color: #aaa;
      margin: 15px 0;
    }

    footer .footer-contact a {
      color: #93AEDD;
      text-decoration: none;
      font-weight: 500;
      font-size: 14px;
    }

    footer .footer-contact a:hover {
      text-decoration: underline;
    }

    footer .footer-copyright {
      margin-top: 20px;
      font-size: 11px;
      color: #888;
    }

    .page-flex {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 40px;
      flex-wrap: wrap;
      min-height: 60vh;
    }

    .screenshot-container, .video-container {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
    }

    /* Sur desktop, limiter la largeur des blocks de screenshots */
    @media (min-width: 769px) {
      .screenshot-block, .video-block {
        min-width: 220px;
        max-width: 220px;
      }
    }

    /* Sur desktop, le screenshots-wrapper n'affiche pas les screenshots côte à côte */
    .screenshots-wrapper {
      display: contents;
    }

    /* Sur desktop, réorganiser l'ordre : screenshot gauche - texte centre - screenshot droite */
    @media (min-width: 769px) {
      .screenshot-block {
        order: 1;
      }
      .main-block {
        order: 2;
      }
      .download-buttons-container {
        order: 2; /* Même order que main-block pour les intégrer visuellement */
        margin-top: -70px; /* Réduire la marge supérieure pour coller au texte */
      }
      .video-block {
        order: 3;
      }
    }

    .download-buttons-container {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin: 70px 0 40px 0;
      width: 100%;
    }

    /* Sur desktop, intégrer visuellement les boutons dans le main-block */
    @media (min-width: 769px) {
      .main-block {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .download-buttons-container {
        margin-top: 0 !important;
        margin-bottom: 40px;
      }
    }

    .download-button {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 150px;
      height: 150px;
      background: #fff;
      border-radius: 20px;
      text-decoration: none;
      transition: background 0.3s, transform 0.3s;
      font-weight: bold;
      font-size: 18px;
    }

    .download-button.apple {
      border: 2px solid #000;
      color: #000;
    }

    .download-button.android {
      border: 2px solid #3ddc84;
      color: #3ddc84;
    }

    .download-button img {
      object-fit: contain;
      margin-bottom: 12px;
    }

    .screenshot-img, .video-img {
      max-width: 220px;
      width: 100%;
      border-radius: 16px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.15);
    }

    /* Media queries pour mobile iPhone */
    @media (max-width: 768px) {
      .container {
        padding: 80px 15px 20px 15px;
      }

      nav {
        top: 10px !important;
        right: 10px !important;
        flex-direction: column;
        gap: 8px !important;
        font-size: 12px !important;
      }

      .language-menu {
        top: 10px;
        left: 10px;
      }

      .page-flex {
        flex-direction: column;
        gap: 20px;
        min-height: auto;
      }

      /* Ordre sur mobile iPhone : logo+texte en haut, puis screenshots, puis boutons */
      .main-block {
        order: 1 !important;
        width: 100% !important;
        max-width: 100% !important;
        min-width: 0 !important;
        padding: 0 10px;
        display: flex !important;
        flex-direction: column;
        align-items: center;
      }

      /* Conteneur pour screenshots côte à côte sur mobile */
      .screenshots-wrapper {
        display: flex !important;
        justify-content: center;
        align-items: center;
        gap: 15px;
        width: 100%;
        order: 2 !important;
        margin-bottom: 20px;
      }

      .screenshot-block {
        order: 1;
        width: auto !important;
        max-width: none !important;
        min-width: 0 !important;
        padding: 0 !important;
        flex: 1;
      }

      .screenshot-container, .video-container {
        width: 100%;
        display: flex;
        justify-content: center;
      }

      .video-block {
        order: 1;
        width: auto !important;
        max-width: none !important;
        min-width: 0 !important;
        padding: 0 !important;
        flex: 1;
      }

      /* Réduction supplémentaire des screenshots pour qu'ils tiennent côte à côte */
      .screenshot-img, .video-img {
        max-width: 140px !important;
        width: 100%;
      }

      /* Boutons de téléchargement sous les screenshots */
      .download-buttons-container {
        order: 3 !important;
        gap: 15px !important;
        margin: 0 0 30px 0 !important;
        width: 100%;
      }

      .download-button {
        width: 105px !important; /* 150px * 0.7 */
        height: 105px !important; /* 150px * 0.7 */
        font-size: 14px !important;
      }

      .download-button img {
        width: 39px !important; /* 56px * 0.7 */
        height: 39px !important; /* 56px * 0.7 */
        margin-bottom: 8px !important;
      }

      .logo {
        max-width: 100px !important;
      }

      h1 {
        font-size: 28px;
        margin-bottom: 8px;
      }

      p.subtitle {
        font-size: 16px;
        margin-bottom: 20px;
      }

      #context-text {
        font-size: 11px !important;
        margin-bottom: 20px !important;
      }

      footer {
        padding: 30px 15px;
        font-size: 11px;
      }

      footer .footer-contact {
        flex-direction: column;
        gap: 8px;
        font-size: 12px;
      }

      footer .footer-links {
        gap: 15px;
      }
    }

    @media (max-width: 900px) and (min-width: 769px) {
      .page-flex {
        flex-direction: column;
        gap: 30px;
      }
      .main-block, .screenshot-block, .video-block {
        width: 100% !important;
        max-width: 100% !important;
        min-width: 0 !important;
      }
      .main-block { order: 1; }
      .screenshot-block { order: 2; }
      .video-block { order: 3; }
    }
  </style>
</head>
<body>
  <div class="overlay"></div>

  <!-- Barre de navigation en haut à droite -->
  <nav style="position: absolute; top: 20px; right: 30px; z-index: 10; display: flex; gap: 24px;">
    <a id="tutorials-link" href="tutorials.html" style="color: #fff; text-decoration: none; font-weight: bold; font-size: 16px;">Tutoriels</a>
    <a id="support-link" href="support.html" style="color: #fff; text-decoration: none; font-weight: bold; font-size: 16px;">Support</a>
    <a id="account-link" href="#login" style="color: #fff; text-decoration: none; font-weight: bold; font-size: 16px;">Login</a>
    <a id="privacy-link" href="privacy_fr.html" style="color: #fff; text-decoration: none; font-weight: bold; font-size: 16px;">Privacy</a>
  </nav>

  <div class="language-menu">
    <div class="custom-select" onclick="toggleDropdown()">
      <img id="current-flag" src="assets/flag_fr_48.png" alt="Langue" style="width:24px;height:24px;border-radius:50%;cursor:pointer;border:2px solid white;object-fit:cover;">
      <div id="dropdown-lang" style="display:none;position:absolute;top:32px;left:0;background:#1c1c1c;border:1px solid white;border-radius:8px;padding:6px 0;z-index:10;">
        <img src="assets/flag_fr_48.png" alt="Français" style="width:24px;height:24px;margin:4px;cursor:pointer;border-radius:50%;object-fit:cover;" onclick="setLanguage('fr')">
        <img src="assets/flag_en_48.png" alt="English" style="width:24px;height:24px;margin:4px;cursor:pointer;border-radius:50%;object-fit:cover;" onclick="setLanguage('en')">
        <img src="assets/flag_de_48.png" alt="Deutsch" style="width:24px;height:24px;margin:4px;cursor:pointer;border-radius:50%;object-fit:cover;" onclick="setLanguage('de')">
        <img src="assets/flag_it_48.png" alt="Italiano" style="width:24px;height:24px;margin:4px;cursor:pointer;border-radius:50%;object-fit:cover;" onclick="setLanguage('it')">
        <img src="assets/flag_es_48.png" alt="Español" style="width:24px;height:24px;margin:4px;cursor:pointer;border-radius:50%;object-fit:cover;" onclick="setLanguage('es')">
      </div>
    </div>
  </div>

  <div class="container">
    <div class="page-flex">
      <!-- Wrapper pour screenshots côte à côte sur mobile -->
      <div class="screenshots-wrapper">
        <div class="screenshot-block">
          <div class="screenshot-container">
            <img src="assets/Screenshot_catalogue.jpg" alt="Capture d'écran AV Wallet" class="screenshot-img">
          </div>
        </div>
        <div class="video-block">
          <div class="video-container">
            <img src="assets/Screenshot_home.jpg" alt="Capture d'écran AV Wallet" class="video-img">
          </div>
        </div>
      </div>
      <!-- Boutons de téléchargement sous les screenshots sur mobile -->
      <div class="download-buttons-container">
        <a href="#" class="download-button apple">
          <img src="assets/logo_apple.jpeg" alt="Apple" width="56" height="56">
          iOS
        </a>
        <a href="#" class="download-button android">
          <img src="assets/logo_android.jpeg" alt="Android" width="56" height="56">
          Android
        </a>
      </div>
      <div class="main-block">
        <!-- Logo centré sans cadre -->
        <div class="logo-container">
          <img src="assets/logo3.png" alt="Logo AV Wallet" class="logo">
        </div>
        <p class="subtitle">Votre expertise dans la poche.</p>
        <p id="context-text" style="max-width: 1000px; margin: 0 auto 30px auto; text-align: center; font-size: 12px; color: #eee;">
          Que vous soyez en plein montage, en préparation ou en repérage client, AV Wallet vous donne les bons chiffres, les bons outils, au bon moment.<br>
          Fini les approximations. Gagnez en rigueur, en temps et en crédibilité.
        </p>
      </div>
    </div>
    <footer>
      <div class="footer-content">
        <div class="footer-links">
          <a id="legal-link" href="privacy_fr.html">Mentions légales</a>
        </div>
        <div class="footer-contact">
          <div style="display: flex; align-items: center; gap: 8px;">
            <span id="support-label">Support :</span>
            <a href="mailto:support@avwallet.fr" id="support-email" style="color: #93AEDD; text-decoration: none; font-weight: 500;">support@avwallet.fr</a>
          </div>
          <span style="color: #666; margin: 0 5px;">|</span>
          <div style="display: flex; align-items: center; gap: 8px;">
            <span id="contact-label">Contact :</span>
            <a href="mailto:contact@avwallet.fr" id="contact-email" style="color: #93AEDD; text-decoration: none; font-weight: 500;">contact@avwallet.fr</a>
          </div>
        </div>
        <div class="footer-copyright" id="footer-copyright">
          © 2025 AV Wallet — Tous droits réservés
        </div>
      </div>
    </footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  function toggleDropdown() {
    const menu = document.getElementById('dropdown-lang');
    menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
  }

  function setLanguage(lang) {
    localStorage.setItem('lang', lang);
    updateLanguage(lang);
    document.getElementById('dropdown-lang').style.display = 'none';
  }

  function updateLanguage(lang) {
    const t = translations[lang] || translations['fr'];
    document.querySelector('.subtitle').textContent = t.slogan;
    document.getElementById('context-text').innerHTML = t.context;
    document.getElementById('footer-copyright').textContent = t.footer;
    document.getElementById('current-flag').src = `assets/flag_${lang}_48.png`;
    document.getElementById('tutorials-link').textContent = t.tutorials;
    document.getElementById('support-link').textContent = t.support;
    document.getElementById('account-link').textContent = t.account;
    document.getElementById('legal-link').textContent = t.legal;
    document.getElementById('support-label').textContent = t.supportLabel;
    document.getElementById('contact-label').textContent = t.contactLabel;
  }

    window.addEventListener('DOMContentLoaded', () => {
      const lang = localStorage.getItem('lang') || 'fr';
      updateLanguage(lang);
      // Lien privacy dynamique
      const privacyMap = {
        fr: 'privacy_fr.html',
        en: 'privacy_en.html',
        de: 'privacy_de.html',
        it: 'privacy_it.html',
        es: 'privacy_es.html'
      };
      document.getElementById('privacy-link').href = privacyMap[lang] || 'privacy_fr.html';
      document.getElementById('legal-link').href = privacyMap[lang] || 'privacy_fr.html';
    });
</script>
  <script>
    function setLanguage(lang) {
      localStorage.setItem('lang', lang);
      location.reload();
    }

    window.addEventListener('load', function() {
      const errorCode = new URLSearchParams(window.location.search).get('error');
      const errorDescription = new URLSearchParams(window.location.search).get('error_description');
      if (errorCode) {
        console.error('OAuth Error:', errorCode, errorDescription);
        window.opener?.postMessage({ type: 'oauth_error', error: errorCode, description: errorDescription }, '*');
        window.close();
        return;
      }

      const authCode = new URLSearchParams(window.location.search).get('code');
      if (authCode) {
        console.log('Auth code received, sending to parent');
        window.opener?.postMessage({ type: 'oauth_success', code: authCode }, '*');
        window.close();
      }
    });
  </script>

  <script>
    const serviceWorkerVersion = null;
  </script>
  <script src="flutter.js" defer></script>
  <div id="loading">Chargement...</div>
  <script>
    window.addEventListener('error', function(e) {
      console.error('Global error:', e.error);
      document.getElementById('loading').textContent = 'Erreur : ' + e.error;
    });

    window.addEventListener('load', function(ev) {
      console.log('Window loaded, initializing Flutter...');
      var loading = document.getElementById('loading');
      _flutter.loader.loadEntrypoint({
        serviceWorker: { serviceWorkerVersion: serviceWorkerVersion },
        onEntrypointLoaded: function(engineInitializer) {
          engineInitializer.initializeEngine().then(function(appRunner) {
            appRunner.runApp();
          });
        }
      });
    });
  </script>
  <script>
    const translations = {
      fr: {
        slogan: "Votre expertise dans la poche.",
        context: "Que vous soyez en plein montage, en préparation ou en repérage client, AV Wallet vous donne les bons chiffres, les bons outils, au bon moment.<br>Fini les approximations. Gagnez en rigueur, en temps et en crédibilité.",
        footer: "© 2025 AV Wallet — Tous droits réservés",
        download: "Télécharger l'application",
        account: "Login",
        tutorials: "Tutoriels",
        support: "Support",
        legal: "Mentions légales",
        supportLabel: "Support :",
        contactLabel: "Contact :"
      },
      en: {
        slogan: "Your expertise, in your pocket.",
        context: "Whether you are in the middle of setup, preparing, or on a client visit, AV Wallet gives you the right numbers, the right tools, at the right time.<br>No more guesswork. Gain accuracy, save time, and boost your credibility.",
        footer: "© 2025 AV Wallet — All rights reserved",
        download: "Download the app",
        account: "Login",
        tutorials: "Tutorials",
        support: "Support",
        legal: "Legal notices",
        supportLabel: "Support:",
        contactLabel: "Contact:"
      },
      de: {
        slogan: "Ihre Expertise in der Tasche.",
        context: "Ob Sie gerade aufbauen, vorbereiten oder beim Kunden sind – AV Wallet liefert Ihnen die richtigen Zahlen, die richtigen Tools, zum richtigen Zeitpunkt.<br>Schluss mit Schätzungen. Gewinnen Sie an Präzision, sparen Sie Zeit und steigern Sie Ihre Glaubwürdigkeit.",
        footer: "© 2025 AV Wallet — Alle Rechte vorbehalten",
        download: "App herunterladen",
        account: "Login",
        tutorials: "Tutorials",
        support: "Support",
        legal: "Impressum",
        supportLabel: "Support:",
        contactLabel: "Kontakt:"
      },
      it: {
        slogan: "La tua competenza, sempre con te.",
        context: "Che tu sia in fase di montaggio, preparazione o sopralluogo dal cliente, AV Wallet ti offre i numeri giusti, gli strumenti giusti, al momento giusto.<br>Basta approssimazioni. Guadagna in precisione, tempo e credibilità.",
        footer: "© 2025 AV Wallet — Tutti i diritti riservati",
        download: "Scarica l'app",
        account: "Login",
        tutorials: "Tutoriali",
        support: "Supporto",
        legal: "Note legali",
        supportLabel: "Supporto:",
        contactLabel: "Contatto:"
      },
      es: {
        slogan: "Tu experiencia en el bolsillo.",
        context: "Ya sea durante el montaje, la preparación o una visita al cliente, AV Wallet te da los datos correctos, las herramientas adecuadas, en el momento justo.<br>Se acabaron las aproximaciones. Gana rigor, tiempo y credibilidad.",
        footer: "© 2025 AV Wallet — Todos los derechos reservados",
        download: "Descargar la app",
        account: "Login",
        tutorials: "Tutoriales",
        support: "Soporte",
        legal: "Aviso legal",
        supportLabel: "Soporte:",
        contactLabel: "Contacto:"
      }
    };

    window.addEventListener('DOMContentLoaded', () => {
      const lang = localStorage.getItem('lang') || 'fr';
      updateLanguage(lang);
    });
  </script>
</body>
</html>
